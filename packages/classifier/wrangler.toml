name = "bubble-classifier"
main = "src/worker.ts"
compatibility_date = "2024-12-18"
compatibility_flags = ["nodejs_compat"]

# Build settings - use esbuild to bundle
[build]
command = "npm run build"

# Module rules for importing non-JS files
[[rules]]
type = "Text"
globs = ["**/*.txt"]
fallthrough = true

# Environment variables (secrets should be set via `wrangler secret put`)
# Required secrets:
#   - ANTHROPIC_API_KEY
#   - OPENAI_API_KEY
#   - SUPABASE_URL
#   - SUPABASE_ANON_KEY

[vars]
ENVIRONMENT = "production"

# Development settings
[dev]
port = 8787
local_protocol = "http"

# Staging environment
[env.staging]
name = "bubble-classifier-staging"
[env.staging.vars]
ENVIRONMENT = "staging"

# Observability
[observability]
enabled = true
