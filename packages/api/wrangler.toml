name = "bubble-api"
account_id = "b67efb1bffe622d9f7d9da2e2da129c3"
main = "src/worker.ts"
compatibility_date = "2025-04-01"
compatibility_flags = ["nodejs_compat", "nodejs_compat_populate_process_env"]

# Build settings - use esbuild to bundle
[build]
command = ""

# Module rules for importing non-JS files
[[rules]]
type = "Text"
globs = ["**/*.txt"]
fallthrough = true

# Environment variables (secrets should be set via `wrangler secret put`)
# Required secrets:
#   - ANTHROPIC_API_KEY
#   - OPENAI_API_KEY
#   - SUPABASE_URL
#   - SUPABASE_ANON_KEY

[vars]
ENVIRONMENT = "production"

# Development settings
[dev]
port = 8787
local_protocol = "http"

# Staging environment
[env.staging]
name = "bubble-api-staging"
[env.staging.vars]
ENVIRONMENT = "staging"

# Observability
[observability]
enabled = true
